"use strict";(self.webpackChunkmonitoring=self.webpackChunkmonitoring||[]).push([[100],{100:(Ci,De,m)=>{m.r(De),m.d(De,{MonitoringMapModule:()=>vi});var y=m(583),Ie=m(630),o=m(639);const zt=["mapElement"];let Ne=(()=>{class t{constructor(){this.lat=51.4532988403089,this.lng=-.15141399330019756,this.zoom=11}ngOnInit(){}ngAfterViewInit(){this.map=new window.google.maps.Map(this.mapElement.nativeElement,{center:{lat:this.lat,lng:this.lng},zoom:this.zoom,disableDefaultUI:!0,styles:[{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]}]})}getMap(){return this.map}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-map"]],viewQuery:function(e,i){if(1&e&&o.Gf(zt,5),2&e){let r;o.iGM(r=o.CRH())&&(i.mapElement=r.first)}},inputs:{lat:"lat",lng:"lng",zoom:"zoom"},decls:2,vars:0,consts:[[1,"map-css"],["mapElement",""]],template:function(e,i){1&e&&o._UZ(0,"div",0,1)},styles:[".map-css{width:100%;height:100vh}.gm-ui-hover-effect{top:0px!important;right:0px!important}.tower-marker-label{font-size:10px!important}.tower-info{display:grid;grid-template-columns:20px 180px 20px;grid-template-rows:auto;grid-column-gap:10px;column-gap:10px}.tower-info .hidden{visibility:hidden}.tower-info .prev-tower{grid-column:1/2;grid-row:1/2;display:flex;justify-content:flex-start;align-items:center;width:100%;height:100%;opacity:.3;cursor:pointer}.tower-info .prev-tower.disabled{cursor:default;opacity:.1}.tower-info .prev-tower:hover{opacity:.5}.tower-info .next-tower{grid-column:3/4;grid-row:1/2;display:flex;justify-content:flex-end;align-items:center;width:100%;height:100%;opacity:.3;cursor:pointer}.tower-info .next-tower.disabled{cursor:default;opacity:.1}.tower-info .next-tower:hover{opacity:.5}.tower-info .count{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;position:absolute;top:0px;left:10px;width:80px;height:30px}.tower-info .content{grid-column:2/3;grid-row:1/2;margin:0 auto 10px;width:100%;height:100%;box-sizing:border-box;padding:5px 0}.tower-info .content .info{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;width:100%;margin:3px auto}.tower-info .content .name{display:flex;justify-content:center;align-items:center;margin-bottom:1px}.tower-info .content .name .value{text-align:center;margin-bottom:10px;font-size:16px}.tower-info .content .value{margin-left:5px}.tower-info .content .unit{margin-left:2px}\n"],encapsulation:2,changeDetection:0}),t})();class a{static getTowerIcon(n){return{url:a.towerIcon,scaledSize:new window.google.maps.Size(n,n),labelOrigin:new window.google.maps.Point(n/2,n+10)}}static getIndex(n){return n>=a.SAMPLES_COUNT?0:n}static getMapScaleKm(n,e){return 156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n)}static getTowerInfoDiv(n,e){const i=document.createElement("div");i.classList.add("tower-info");const r=document.createElement("div");r.classList.add("prev-tower"),r.addEventListener("click",()=>{const d=document.getElementById("currentTower"),f=null==d?void 0:d.textContent;if(f){let _=parseInt(f)-1;_<1&&(_=n.towers.length);const C=document.querySelectorAll('*[id^="tower-"]');C.forEach(u=>u.classList.add("hidden"));for(let u=0;u<C.length;u++)if(u+1===_&&d){for(C[u].classList.remove("hidden");d.firstChild;)d.removeChild(d.firstChild);d.innerHTML=_.toString()}}});const s=document.createElement("img");s.src=this.prevTowerIcon,r.appendChild(s);const l=document.createElement("div");l.classList.add("next-tower"),l.addEventListener("click",()=>{const d=document.getElementById("currentTower"),f=null==d?void 0:d.textContent;if(f){let _=parseInt(f)+1;_>n.towers.length&&(_=1);const C=document.querySelectorAll('*[id^="tower-"]');C.forEach(u=>u.classList.add("hidden"));for(let u=0;u<C.length;u++)if(u+1===_&&d){for(C[u].classList.remove("hidden");d.firstChild;)d.removeChild(d.firstChild);d.innerHTML=_.toString()}}});const c=document.createElement("img");c.src=this.nextTowerIcon,l.appendChild(c);const g=document.createElement("div");g.classList.add("count");const b=document.createElement("div");b.classList.add("current-tower"),b.innerText="1",b.id="currentTower";const v=document.createElement("div");v.classList.add("slash"),v.innerText="/";const F=document.createElement("div");F.classList.add("total-towers"),F.innerText=n.towers.length.toString(),g.appendChild(b),g.appendChild(v),g.appendChild(F),i.appendChild(g),i.appendChild(r);for(let d=0;d<n.towers.length;d++){const f=document.createElement("div");f.classList.add("content"),d>0&&f.classList.add("hidden"),f.id="tower-"+(d+1);const E=n.towers[d],_=document.createElement("div");_.classList.add("info","name");const C=document.createElement("div");C.classList.add("value"),C.innerText=E.name,_.appendChild(C);const u=document.createElement("div");u.classList.add("info","height");const Oe=document.createElement("div");Oe.classList.add("label"),Oe.innerText="Tower height:";const Ae=document.createElement("div");Ae.classList.add("value"),Ae.innerText=E.height.toString();const Ve=document.createElement("div");Ve.classList.add("unit"),Ve.innerText="m",u.appendChild(Oe),u.appendChild(Ae),u.appendChild(Ve);const L=document.createElement("div");L.classList.add("info","power");const xe=document.createElement("div");xe.classList.add("label"),xe.innerText="Transmitter power:";const Se=document.createElement("div");Se.classList.add("value"),Se.innerText=E.power.toString();const ke=document.createElement("div");ke.classList.add("unit"),ke.innerText="kw",L.appendChild(xe),L.appendChild(Se),L.appendChild(ke);const G=document.createElement("div");G.classList.add("info","coverage");const Ee=document.createElement("div");Ee.classList.add("label"),Ee.innerText="Network coverage:";const Pe=document.createElement("div");Pe.classList.add("value"),Pe.innerText=E.coverage.toString();const Te=document.createElement("div");Te.classList.add("unit"),Te.innerText="kw",G.appendChild(Ee),G.appendChild(Pe),G.appendChild(Te),f.appendChild(_),f.appendChild(u),f.appendChild(L),f.appendChild(G),i.appendChild(f)}return i.appendChild(l),i}static getHeatmapOpacity(n){return n<10?.5:10===n?.55:11===n?.6:12===n?.65:13===n?.7:14===n?.75:1}static getPosition(n,e){return new window.google.maps.LatLng(n,e)}static getBoundsCords(n){const e=n.getNorthEast(),i=n.getSouthWest(),r=e.lat(),s=i.lat(),l=e.lng();return{minLat:s,maxLat:r,minLng:i.lng(),maxLng:l}}static consoleLogBounds(n){const e=n.getNorthEast(),i=n.getSouthWest();console.log("bounds: ",i.lat(),e.lat(),i.lng(),e.lng())}}a.towerIcon="assets/icons/signal_black_light.png",a.prevTowerIcon="assets/icons/chevron_left_black.svg",a.nextTowerIcon="assets/icons/chevron_right_black.svg",a.COVERAGE_CIRCLE_FILL_OPACITY=.05,a.COVERAGE_CIRCLE_STROKE_OPACITY=.3,a.SAMPLES_COUNT=10,a.FIRST_LAYERS_COUNT=3,a.PLAY_SPEED_BUTTON_STEP=3,a.ANIMATION_OPERATION="ANIMATION_OPERATION",a.AVAILABILITY_ALL_LAYERS="AVAILABILITY_ALL_LAYERS",a.OCCUPANCY_ALL_LAYERS="OCCUPANCY_ALL_LAYERS",a.TIMELINE_ANIMATION_INTERVAL_MILLISECONDS=30,a.TIMELINE_ANIMATION_MAX_MARKER_POSITION=1e3/a.TIMELINE_ANIMATION_INTERVAL_MILLISECONDS*a.SAMPLES_COUNT,a.TIMELINE_SCALE_STEP=5,a.HEATMAP_POINT_RADIUS=20,a.AVAILABILITY_HEATMAP_KEY="AVAILABILITY",a.OCCUPANCY_HEATMAP_KEY="OCCUPANCY";class Ut{constructor(n,e,i){this.lat=n,this.lng=e,this.towers=i}}class K{constructor(n,e,i,r){this.name=n,this.height=e,this.power=i,this.coverage=r}getIconSize(){return this.height>200?35:this.height>100?30:25}static getThreshold(n){let e=50;return e=n<7?50:7===n?10:8===n?1:9===n?.1:10===n?.05:11===n?.001:0,e}}var W=m(49),Fe=m(841),w=m(215);let P=(()=>{class t{constructor(){this.towerChanged$=new w.X(!0),this.coverageChanged$=new w.X(!1),this.availabilityChanged$=new w.X(!1),this.occupancyChanged$=new w.X(!1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Yt=(()=>{class t{constructor(e,i){this.http=e,this.keyOptionsService=i,this.locations=[],this.markers=[],this.locationsInitialized=!1,this.coverageInitialized=!1,this.coverageCheck=!1,this.http.get("assets/data/towers.json").pipe((0,W.P)()).subscribe(r=>{r.forEach(s=>{const l=this.locations.find(c=>c.lat===s.lat&&c.lng===s.lng);l?l.towers.push(new K(s.name,s.height,s.power,s.coverage)):this.locations.push(new Ut(s.lat,s.lng,[new K(s.name,s.height,s.power,s.coverage)]))}),this.initLocations(),this.initCoverage(),this.map&&this.loadLocations(this.map.getZoom(),this.map.getBounds())}),this.keyOptionsService.coverageChanged$.subscribe(r=>this.coverageCheck=r)}setMap(e){this.map=e}setLocations(e){this.locations=e.slice()}getMaxCoverage(e){let i=0;for(let s=0;s<e.length;s++)e[s].coverage>i&&(i=e[s].coverage);return i*=a.getMapScaleKm(this.map.getZoom(),this.map.getCenter().lat()),i}isCoverageInitialized(){return this.coverageInitialized}isLocationInitialized(){return this.locationsInitialized}initLocations(){this.locationsInitialized||this.map&&this.locations&&this.locations.length>0&&this.locations.forEach(e=>{const i=a.getTowerIcon(e.towers[0].getIconSize()),r=new window.google.maps.Marker({position:new window.google.maps.LatLng(e.lat,e.lng),icon:i,map:null,title:e.towers.length>1?e.towers[0].name+"*":e.towers[0].name,label:{text:e.towers.length>1?e.towers[0].name+"*":e.towers[0].name,className:"tower-marker-label"}});this.getInfoWindow(e,r),this.markers.push({location:e,marker:r,circle:null,visible:!1}),this.locationsInitialized=!0})}initCoverage(){!this.locationsInitialized||this.coverageInitialized||(this.markers.forEach(e=>{let i=a.COVERAGE_CIRCLE_FILL_OPACITY,r=a.COVERAGE_CIRCLE_STROKE_OPACITY;e.visible||(i=0,r=0);const s=Math.floor(this.getMaxCoverage(e.location.towers)),l=a.getPosition(e.location.lat,e.location.lng);e.circle=this.drawCircle(s,l,i,r)}),this.coverageInitialized=!0)}showCoverage(){this.coverageInitialized&&(this.map.getBounds(),this.markers.filter(i=>i.visible&&i.circle).forEach(i=>{i.circle.setOptions({fillOpacity:a.COVERAGE_CIRCLE_FILL_OPACITY,strokeOpacity:a.COVERAGE_CIRCLE_STROKE_OPACITY})}))}hideCoverage(){!this.coverageInitialized||this.markers.filter(e=>e.visible&&e.circle).forEach(e=>{e.circle.setOptions({fillOpacity:0,strokeOpacity:0})})}drawCircle(e,i,r,s){return new window.google.maps.Circle({map:this.map,radius:e,strokeColor:"blue",strokeOpacity:s,strokeWeight:1,fillColor:"blue",fillOpacity:r,center:i})}getInfoWindow(e,i){const r=new window.google.maps.InfoWindow({content:a.getTowerInfoDiv(e,i),opened:!1});r.addListener("closeclick",()=>{r.opened=!1}),i.addListener("click",()=>{if(r.opened)return r.close(),void(r.opened=!1);r.open({anchor:i,map:this.map,shouldFocus:!1}),r.opened=!0})}loadLocations(e,i){if(this.valid())if(this.markers.forEach(r=>{r.visible=!1,r.marker.setMap(null),r.circle&&this.coverageCheck&&r.circle.setOptions({fillOpacity:0,strokeOpacity:0})}),i&&e<7){let r=200;this.markers.filter(s=>i.contains(s.marker.getPosition())&&s.location.towers[0].power>=r).forEach(s=>{s.visible=!0,s.marker.setMap(this.map),s.circle&&this.coverageCheck&&s.circle.setOptions({fillOpacity:a.COVERAGE_CIRCLE_FILL_OPACITY,strokeOpacity:a.COVERAGE_CIRCLE_STROKE_OPACITY})})}else if(i){let r=K.getThreshold(e);this.markers.filter(s=>i.contains(s.marker.getPosition())&&s.location.towers[0].power>=r).forEach(s=>{s.visible=!0,s.marker.setMap(this.map),s.circle&&this.coverageCheck&&s.circle.setOptions({fillOpacity:a.COVERAGE_CIRCLE_FILL_OPACITY,strokeOpacity:a.COVERAGE_CIRCLE_STROKE_OPACITY})})}}clearLocations(){this.hideCoverage(),this.hideTowers()}valid(){return this.locationsInitialized&&this.map&&this.locations&&this.locations.length>0}hideTowers(){this.markers.forEach(e=>{e.visible=!1,e.marker.setMap(null)})}showTowers(){!this.map||this.markers.forEach(e=>{e.visible=!0,e.marker.setMap(this.map)})}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(Fe.eN),o.LFG(P))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var R=m(2);class Ht{constructor(n,e,i,r){this.heatmap=n,this.heatmapData=e,this.loaded=i,this.gradient=r}show(n=1){this.heatmap.set("opacity",n)}hide(){this.loaded&&this.heatmap.set("opacity",0)}load(n,e,i){this.heatmapData=[];for(let r=0;r<e.length;r++){const s=e[r];this.heatmapData.push({location:a.getPosition(s.lat,s.lng),weight:s.weight/10})}this.heatmap?this.heatmap.setData(this.heatmapData):this.heatmap=new window.google.maps.visualization.HeatmapLayer({data:this.heatmapData,radius:a.HEATMAP_POINT_RADIUS,map:n,opacity:i,gradient:this.gradient}),this.loaded=!0}}class qt{constructor(n,e){this.layers=[],this.key="",this.key=n;for(let i=0;i<a.SAMPLES_COUNT;i++)this.layers.push(new Ht(null,[],!1,e))}}let jt=(()=>{class t{constructor(e){this.http=e}getSpectrums(e=0,i=11){const r=this.getFactor(i);return this.http.get(`assets/data/availability-${e+1}.json`).pipe((0,R.U)(s=>0===r?s:s.filter((l,c)=>c%r==0)))}getFactor(e){return e>11?0:10*(12-e)+5}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(Fe.eN))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Q=(()=>{class t{constructor(e){this.spectrumService=e,this.heatmaps=[]}createHeatMap(e,i){let r=this.heatmaps.find(s=>s.key===e);r||(r=new qt(e,i),this.heatmaps.push(r))}loadLayer(e,i,r=!0){if(!this.isValid())return;const s=this.getHeatmap(e);if(!s)return;const l=s.layers[i];let c=this.getOpacity();r||(c=0),l.loaded&&l.show(c),l.loaded=!1,this.getDataPoints(i,this.zoom).pipe((0,W.P)()).subscribe(g=>{l.load(this.map,g,c)})}getOpacity(){let e=(this.zoom-7)/10;return e>1&&(e=1),e}getHeatmap(e){return this.heatmaps.find(i=>i.key===e)}isValid(){return!(!this.map||!this.bounds)}clearAllLayers(e){if(!this.isValid())return;const i=this.getHeatmap(e);!i||i.layers.forEach(r=>r.hide())}clearLayer(e,i){if(!this.isValid())return;const r=this.getHeatmap(e);!r||r.layers[i].hide()}setMap(e){this.map=e}setBounds(e){this.bounds=e}setZoom(e){this.zoom=e}getDataPoints(e,i){return this.spectrumService.getSpectrums(e,i).pipe((0,W.P)(),(0,R.U)(r=>r.map(s=>({weight:s.avl,lat:s.lat,lng:s.lng}))))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(jt))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),X=(()=>{class t{constructor(e){this.heatmapService=e,this.heatmapService.createHeatMap(a.AVAILABILITY_HEATMAP_KEY,this.getGradient())}showAvailability(e){this.heatmapService.loadLayer(a.AVAILABILITY_HEATMAP_KEY,e),this.loadNext(e)}loadNext(e){const i=a.getIndex(e+1);this.heatmapService.loadLayer(a.AVAILABILITY_HEATMAP_KEY,i,!1)}clearAvailability(){this.heatmapService.clearAllLayers(a.AVAILABILITY_HEATMAP_KEY)}getGradient(){return["rgba(102, 255, 0, 0)","rgba(102, 255, 0, 1)","rgba(147, 255, 0, 1)","rgba(193, 255, 0, 1)","rgba(238, 255, 0, 1)","rgba(244, 227, 0, 1)","rgba(249, 198, 0, 1)","rgba(255, 170, 0, 1)","rgba(255, 113, 0, 1)","rgba(255, 57, 0, 1)","rgba(255, 0, 0, 1)"]}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(Q))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Le=(()=>{class t{constructor(e){this.heatmapService=e,this.heatmapService.createHeatMap(a.OCCUPANCY_HEATMAP_KEY,this.getGradient())}showOccupancy(e){this.heatmapService.loadLayer(a.OCCUPANCY_HEATMAP_KEY,e),this.loadNext(e)}loadNext(e){const i=a.getIndex(e+1);this.heatmapService.loadLayer(a.OCCUPANCY_HEATMAP_KEY,i,!1)}clearOccupancy(){this.heatmapService.clearAllLayers(a.OCCUPANCY_HEATMAP_KEY)}getGradient(){return["rgba(102, 0, 255, 0)","rgba(102, 0, 255, 1)","rgba(147, 0, 255, 1)","rgba(193, 0, 255, 1)","rgba(238, 0, 255, 1)","rgba(244, 227, 0, 1)","rgba(249, 198, 0, 1)","rgba(255, 170, 0, 1)","rgba(255, 113, 0, 1)","rgba(255, 57, 0, 1)","rgba(255, 0, 0, 1)"]}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(Q))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ge=(()=>{class t{constructor(){this.speed=3,this.started=!1,this.animationStarted$=new w.X(this.started),this.speedChanged$=new w.X(this.speed),this.index=1,this.indexChanged$=new w.X(1)}isRunning(){return this.started}getSpeed(){return this.speed}getIndex(){return this.index}startAnimation(){this.started=!0,this.animateMap(),this.animationStarted$.next(this.started)}setIndex(e){this.index=e,this.indexChanged$.next(e)}stopAnimation(){this.started=!1,clearInterval(this.animationInterval),this.animationStarted$.next(this.started)}setSpeed(e){this.speed!=e&&(this.speed=e,this.animationInterval&&this.animateMap(),this.speedChanged$.next(e))}animateMap(){clearInterval(this.animationInterval),this.animationInterval=setInterval(()=>{this.incrementIndex()},1e3*this.speed)}incrementIndex(){this.index++,this.index===a.SAMPLES_COUNT&&(this.index=0),this.indexChanged$.next(this.index)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$t=(()=>{class t{constructor(){this.lat=51.4532988403089,this.lng=-.15141399330019756,this.keepMoving=!1}keepMovingUp(){this.keepMoving||(this.keepMoving=!0,this.panMap(0,this.getPanStep()))}keepMovingDown(){this.keepMoving||(this.keepMoving=!0,this.panMap(0,-1*this.getPanStep()))}keepMovingRight(){this.keepMoving||(this.keepMoving=!0,this.panMap(this.getPanStep(),0))}keepMovingLeft(){this.keepMoving||(this.keepMoving=!0,this.panMap(-1*this.getPanStep(),0))}stopMoving(){this.keepMoving=!1}panMap(e,i){!this.keepMoving||!this.map||(this.lat=this.lat+i,this.lng=this.lng+e,this.map.panTo({lat:this.lat,lng:this.lng}),setTimeout(()=>{this.panMap.bind(this),this.panMap(e,i)},50))}getPanStep(){return.01}setMap(e){this.map=e}getLat(){return this.lat}getLng(){return this.lng}setLat(e){this.lat=e}setLng(e){this.lng=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Jt=(()=>{class t{constructor(){this.zoomStep=1}zoomIn(){this.zoomMap(this.zoomStep)}zoomOut(){this.zoomMap(-1*this.zoomStep)}zoomMap(e){if(!this.map)return;const i=this.map.getZoom()+e;i>=0&&i<23&&this.map.setZoom(i)}setMap(e){this.map=e}getZoom(){return this.map.getZoom()}setZoom(e){this.map.setZoom(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Kt=(()=>{class t{constructor(){this.markerPositionChanged$=new w.X(0)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ee=(()=>{class t{constructor(){this.id="",this.check=!0,this.checked=new o.vpe,this.disabled=!1,this.label="",this.sub=!1}ngOnInit(){}onChange(e){this.check=e,this.checked.emit(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-checkbox"]],inputs:{id:"id",check:"check",disabled:"disabled",label:"label",sub:"sub"},outputs:{checked:"checked"},decls:4,vars:9,consts:[[1,"container"],["type","checkbox",3,"id","disabled","checked","change"],[3,"for","click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"input",1),o.NdJ("change",function(s){return i.onChange(s.target.checked)}),o.qZA(),o.TgZ(2,"label",2),o.NdJ("click",function(){return i.onChange(!i.check)}),o._uU(3),o.qZA(),o.qZA()),2&e&&(o.ekj("sub",i.sub),o.xp6(1),o.Q6J("id",i.id)("disabled",i.disabled)("checked",i.check),o.xp6(1),o.ekj("disabled",i.disabled),o.Q6J("for",i.id),o.xp6(1),o.hij(" ",i.label," "))},styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{font-family:sans-serif;width:100%;color:#00f;font-weight:bold;font-size:18px;margin-left:10px;margin-top:10px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:white;border-radius:2px;box-sizing:border-box;position:relative;box-sizing:content-box;width:21px;height:21px;border-width:1px;transition:all 50ms linear;border-color:#6b90df;border-style:solid}.container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:#067eb3}.container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus{box-shadow:none}.container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled{background-color:#ececec;cursor:default}.container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{content:"\\2714";text-align:center;margin:0 auto;color:#fff;top:-1px;left:4px;position:absolute;font-size:16px}.container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:after{content:"";text-align:center;margin:0 auto;color:#fff;top:-1px;left:4px;position:absolute;font-size:16px;cursor:default}.container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:5px;margin-top:-2px;cursor:pointer}.container[_ngcontent-%COMP%]   label.disabled[_ngcontent-%COMP%]{color:#8d8dd3;cursor:default}.container.sub[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;margin-top:0}']}),t})(),Wt=(()=>{class t{constructor(e){this.keyOptionsService=e,this.towerCheck=!0,this.coverageCheck=!0,this.coverageLastState=!0}ngOnInit(){this.keyOptionsService.towerChanged$.subscribe(e=>{this.towerCheck=e}),this.keyOptionsService.coverageChanged$.subscribe(e=>{this.coverageCheck=e})}onCheck(e){this.towerCheck=e,this.keyOptionsService.towerChanged$.next(e),e?this.onCoverageCheck(this.coverageLastState):(this.coverageLastState=this.coverageCheck,this.onCoverageCheck(e))}onCoverageCheck(e){this.coverageCheck=e,this.keyOptionsService.coverageChanged$.next(e)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(P))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-tower-key"]],decls:3,vars:4,consts:[["label","Tower","id","towerCheck",3,"check","checked"],[1,"sub"],["label","Network Coverage","id","coverageCheck",3,"sub","disabled","check","checked"]],template:function(e,i){1&e&&(o.TgZ(0,"app-checkbox",0),o.NdJ("checked",function(s){return i.onCheck(s)}),o.qZA(),o.TgZ(1,"div",1),o.TgZ(2,"app-checkbox",2),o.NdJ("checked",function(s){return i.onCoverageCheck(s)}),o.qZA(),o.qZA()),2&e&&(o.Q6J("check",i.towerCheck),o.xp6(2),o.Q6J("sub",!0)("disabled",!i.towerCheck)("check",i.coverageCheck))},directives:[ee],styles:[".sub[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;margin-left:30px}.sub[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.sub[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#00f;font-family:sans-serif;cursor:pointer}"]}),t})(),Re=(()=>{class t{constructor(){this.gradient=[]}ngOnInit(){}getBackground(){if(this.gradient.length<1)return"";let e="linear-gradient(to right,";return this.gradient.forEach(i=>{e+=i+", "}),e=e.substr(0,e.length-2),e+=")",e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-gradient-rectangle"]],inputs:{gradient:"gradient"},decls:1,vars:2,consts:[[1,"container"]],template:function(e,i){1&e&&o._UZ(0,"div",0),2&e&&o.Udp("background",i.getBackground())},styles:[".container[_ngcontent-%COMP%]{width:100%;height:30px;border:1px solid blue}"]}),t})();function Qt(t,n){if(1&t&&o._UZ(0,"app-gradient-rectangle",2),2&t){const e=o.oxw();o.Q6J("gradient",e.gradient)}}let Xt=(()=>{class t{constructor(e,i){this.availabilityService=e,this.keyOptionsService=i,this.gradient=[],this.check=!1}ngOnInit(){this.gradient=this.availabilityService.getGradient().reverse(),this.sub=this.keyOptionsService.availabilityChanged$.subscribe(e=>this.check=e)}onCheck(e){this.check=e,this.keyOptionsService.availabilityChanged$.next(e)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(X),o.Y36(P))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-availability-key"]],decls:2,vars:2,consts:[["label","Availability","id","availability-check",3,"check","checked"],[3,"gradient",4,"ngIf"],[3,"gradient"]],template:function(e,i){1&e&&(o.TgZ(0,"app-checkbox",0),o.NdJ("checked",function(s){return i.onCheck(s)}),o.qZA(),o.YNc(1,Qt,1,1,"app-gradient-rectangle",1)),2&e&&(o.Q6J("check",i.check),o.xp6(1),o.Q6J("ngIf",i.check))},directives:[ee,y.O5,Re],styles:["app-gradient-rectangle[_ngcontent-%COMP%]{margin-left:45px;margin-right:14px;display:block;opacity:.5}"]}),t})();function en(t,n){if(1&t&&o._UZ(0,"app-gradient-rectangle",2),2&t){const e=o.oxw();o.Q6J("gradient",e.gradient)}}let tn=(()=>{class t{constructor(e,i){this.occupancyService=e,this.keyOptionsService=i,this.gradient=[],this.check=!1}ngOnInit(){this.gradient=this.occupancyService.getGradient().reverse(),this.sub=this.keyOptionsService.occupancyChanged$.subscribe(e=>this.check=e)}onCheck(e){this.check=e,this.keyOptionsService.occupancyChanged$.next(e)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Le),o.Y36(P))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-occupancy-key"]],decls:2,vars:2,consts:[["label","Occupancy","id","occupancy-check",3,"check","checked"],[3,"gradient",4,"ngIf"],[3,"gradient"]],template:function(e,i){1&e&&(o.TgZ(0,"app-checkbox",0),o.NdJ("checked",function(s){return i.onCheck(s)}),o.qZA(),o.YNc(1,en,1,1,"app-gradient-rectangle",1)),2&e&&(o.Q6J("check",i.check),o.xp6(1),o.Q6J("ngIf",i.check))},directives:[ee,y.O5,Re],styles:["app-gradient-rectangle[_ngcontent-%COMP%]{margin-left:45px;margin-right:14px;display:block;opacity:.5}"]}),t})();function nn(t,n){1&t&&o._UZ(0,"app-tower-key")}function on(t,n){1&t&&o._UZ(0,"app-availability-key")}function rn(t,n){1&t&&o._UZ(0,"app-occupancy-key")}const Ze=function(t){return{hidden:t}};let sn=(()=>{class t{constructor(e){this.availabilityService=e,this.open=!1}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(X))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-key-options"]],decls:16,vars:9,consts:[[1,"show-key-options",3,"ngClass","click"],["src","assets/icons/expand_more.svg"],[1,"container",3,"ngClass"],[1,"key-options"],[4,"ngIf"],[1,"divider"],[1,"hide-key-options",3,"click"],["src","assets/icons/expand_less.svg"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return i.open=!0}),o.TgZ(1,"div"),o._uU(2," Key & options "),o.qZA(),o._UZ(3,"img",1),o.qZA(),o.TgZ(4,"div",2),o.TgZ(5,"div",3),o.YNc(6,nn,1,0,"app-tower-key",4),o._UZ(7,"hr",5),o.YNc(8,on,1,0,"app-availability-key",4),o._UZ(9,"hr",5),o.YNc(10,rn,1,0,"app-occupancy-key",4),o._UZ(11,"hr",5),o.qZA(),o.TgZ(12,"div",6),o.NdJ("click",function(){return i.open=!1}),o.TgZ(13,"div"),o._uU(14," Hide key & options "),o.qZA(),o._UZ(15,"img",7),o.qZA(),o.qZA()),2&e&&(o.Q6J("ngClass",o.VKq(5,Ze,i.open)),o.xp6(4),o.Q6J("ngClass",o.VKq(7,Ze,!i.open)),o.xp6(2),o.Q6J("ngIf",i.open),o.xp6(2),o.Q6J("ngIf",i.open),o.xp6(2),o.Q6J("ngIf",i.open))},directives:[y.mk,y.O5,Wt,Xt,tn],styles:[".show-key-options[_ngcontent-%COMP%]{width:160px;height:30px;background-color:#067eb3;cursor:pointer;display:flex;justify-content:space-evenly;align-items:center;color:#fff;font-family:Arial,Helvetica,sans-serif;border-radius:2px;padding:5px;box-sizing:border-box}.show-key-options[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.hidden[_ngcontent-%COMP%]{height:0px;width:0px;visibility:hidden}.container[_ngcontent-%COMP%]{width:300px;height:520px;background-color:#ece7fffc;border-radius:2px;position:relative;overflow-y:auto;overflow-x:hidden;box-sizing:border-box;display:flex;flex-direction:column;border:1px solid gray}.container[_ngcontent-%COMP%]   .key-options[_ngcontent-%COMP%]{width:100%;height:calc(100% - 30px);padding-bottom:20px;border-radius:2px;position:relative;overflow-y:auto;overflow-x:hidden;box-sizing:border-box}.container[_ngcontent-%COMP%]   .hide-key-options[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;height:30px;display:flex;justify-content:space-between;align-items:center;background-color:#067eb3;color:#fff;font-family:Arial,Helvetica,sans-serif;padding:5px 10px;cursor:pointer;border-bottom-left-radius:2px;border-bottom-right-radius:2px;position:absolute;bottom:0px;left:0px}.container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:sans-serif;width:100%;color:#00f;font-weight:bold;font-size:18px;margin-left:10px;margin-top:10px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;cursor:pointer}.container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:5px;margin-top:-2px;cursor:pointer}.container[_ngcontent-%COMP%]   .frequency[_ngcontent-%COMP%]{height:140px}.container[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:90%;margin:10px auto;color:#d3d3d3;opacity:.5}"],changeDetection:0}),t})(),an=(()=>{class t{constructor(){this.up=new o.vpe,this.down=new o.vpe,this.right=new o.vpe,this.left=new o.vpe,this.zoomIn=new o.vpe,this.zoomOut=new o.vpe}ngOnInit(){}moveUp(e){this.up.emit(e)}moveDown(e){this.down.emit(e)}moveRight(e){this.right.emit(e)}moveLeft(e){this.left.emit(e)}onZoomIn(){this.zoomIn.emit()}onZoomOut(){this.zoomOut.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-zoom"]],outputs:{up:"up",down:"down",right:"right",left:"left",zoomIn:"zoomIn",zoomOut:"zoomOut"},decls:15,vars:0,consts:[[1,"container"],[1,"zoom"],[1,"zoom-in",3,"click"],["src","assets/icons/plus.svg"],[1,"zoom-out",3,"click"],["src","assets/icons/minus.svg"],[1,"move"],[1,"move-up",3,"mousedown","mouseup"],["src","assets/icons/expand_less.svg"],[1,"move-down",3,"mousedown","mouseup"],["src","assets/icons/expand_more.svg"],[1,"move-right",3,"mousedown","mouseup"],["src","assets/icons/chevron_right.svg"],[1,"move-left",3,"mousedown","mouseup"],["src","assets/icons/chevron_left.svg"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.NdJ("click",function(){return i.onZoomIn()}),o._UZ(3,"img",3),o.qZA(),o.TgZ(4,"div",4),o.NdJ("click",function(){return i.onZoomOut()}),o._UZ(5,"img",5),o.qZA(),o.qZA(),o.TgZ(6,"div",6),o.TgZ(7,"div",7),o.NdJ("mousedown",function(){return i.moveUp(!0)})("mouseup",function(){return i.moveUp(!1)}),o._UZ(8,"img",8),o.qZA(),o.TgZ(9,"div",9),o.NdJ("mousedown",function(){return i.moveDown(!0)})("mouseup",function(){return i.moveDown(!1)}),o._UZ(10,"img",10),o.qZA(),o.TgZ(11,"div",11),o.NdJ("mousedown",function(){return i.moveRight(!0)})("mouseup",function(){return i.moveRight(!1)}),o._UZ(12,"img",12),o.qZA(),o.TgZ(13,"div",13),o.NdJ("mousedown",function(){return i.moveLeft(!0)})("mouseup",function(){return i.moveLeft(!1)}),o._UZ(14,"img",14),o.qZA(),o.qZA(),o.qZA())},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100px;height:170px}.container[_ngcontent-%COMP%]   .zoom[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;background-color:#25252580;padding:10px;border-radius:2px}.container[_ngcontent-%COMP%]   .zoom-in[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .zoom-out[_ngcontent-%COMP%]{width:25px;height:25px;background-color:#3e59f3;display:flex;justify-content:center;align-items:center;border-radius:2px;cursor:pointer}.container[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{background-color:#25252580;padding:10px;border-radius:2px;position:relative;margin-top:10px;width:100px;height:100px;box-sizing:border-box;display:grid;grid-template-rows:repeat(3,1fr);grid-template-columns:repeat(3,1fr)}.container[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]   .move-up[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]   .move-down[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]   .move-left[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]   .move-right[_ngcontent-%COMP%]{width:25px;height:25px;background-color:#3e59f3;display:flex;justify-content:center;align-items:center;border-radius:2px;cursor:pointer}.container[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]   .move-up[_ngcontent-%COMP%]{grid-column:2/3;grid-row:1/1}.container[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]   .move-down[_ngcontent-%COMP%]{grid-column:2/3;grid-row:3/4}.container[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]   .move-right[_ngcontent-%COMP%]{grid-column:3/4;grid-row:2/3}.container[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]   .move-left[_ngcontent-%COMP%]{grid-column:1/2;grid-row:2/3}"]}),t})();const ln=["ruler"],cn=["marker"];function dn(t,n){1&t&&o._UZ(0,"div",7),2&t&&o.Udp("height",n.$implicit.height+"%")}let un=(()=>{class t{constructor(e){this.renderer=e,this.total=a.SAMPLES_COUNT,this.mainMark=a.TIMELINE_SCALE_STEP,this.markerPosition=0,this.lines=[],this.dragging=!1,this.positionChanged=new o.vpe,this.playing=!1}onMouseMove(e){this.dragging&&this.setMarkerPosition(e.clientX)}onMouseDown(e){e.preventDefault(),this.dragging=!0}onMouseUp(e){this.dragging=!1}ngOnInit(){for(let e=0;e<=(a.SAMPLES_COUNT-1)*a.TIMELINE_SCALE_STEP;e++){let i=30;e%this.mainMark==0&&(i=60),this.lines.push({height:i})}}onMarkerClick(e){this.positionChanged.emit(this.markerPosition)}setMarkerPosition(e){let i=this.ruler.nativeElement.clientWidth-(window.innerWidth-e);i>this.ruler.nativeElement.clientWidth-30&&(i=this.ruler.nativeElement.clientWidth-40),i<0&&(i=0),this.markerPosition=i,this.renderer.setStyle(this.marker.nativeElement,"margin-left",this.markerPosition+"px")}onDragStarted(){this.dragging=!0}onDragStopped(){this.dragging=!1,this.positionChanged.emit(this.markerPosition)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.Qsj))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-time-line"]],viewQuery:function(e,i){if(1&e&&(o.Gf(ln,5),o.Gf(cn,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.ruler=r.first),o.iGM(r=o.CRH())&&(i.marker=r.first)}},hostBindings:function(e,i){1&e&&o.NdJ("mousemove",function(s){return i.onMouseMove(s)},!1,o.evT)("mousedown",function(s){return i.onMouseDown(s)})("mouseup",function(s){return i.onMouseUp(s)},!1,o.evT)},inputs:{total:"total",playing:"playing"},outputs:{positionChanged:"positionChanged"},decls:7,vars:1,consts:[[1,"container"],[1,"lines"],["ruler",""],["class","line",3,"height",4,"ngFor","ngForOf"],[1,"marker"],["marker",""],[1,"border",3,"click"],[1,"line"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1,2),o.YNc(3,dn,1,2,"div",3),o.qZA(),o._UZ(4,"div",4,5),o.TgZ(6,"div",6),o.NdJ("click",function(s){return i.onMarkerClick(s.clientX)}),o.qZA(),o.qZA()),2&e&&(o.xp6(3),o.Q6J("ngForOf",i.lines))},directives:[y.sg],styles:[".container[_ngcontent-%COMP%]{width:100%;height:60px;padding:0;margin:0;box-sizing:border-box}.container[_ngcontent-%COMP%]   .lines[_ngcontent-%COMP%]{position:relative;z-index:0;height:60px;width:100%;display:flex;flex-direction:row;justify-content:space-evenly;align-items:flex-end;margin-top:-30px;padding-left:10px;padding-right:10px;box-sizing:border-box;border-bottom:1px solid gray;overflow-x:hidden}.container[_ngcontent-%COMP%]   .lines[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:1px;background-color:#919191}.container[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{display:block;position:relative;width:24px;height:24px;padding:2px;border-radius:50%;border:2px solid #587fec;margin-top:-15px;background:url(/assets/icons/code.svg);background-position:4px 4px;background-color:#fff;border-color:#067eb3;background-repeat:no-repeat;background-size:30px 30px;height:35px;width:35px;z-index:5;cursor:pointer}.container[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]:hover{border:2px solid #1c40a5;background:url(/assets/icons/code-black.svg);background-position:4px 4px;background-color:#fff;border-color:#067eb3;background-repeat:no-repeat;background-size:30px 30px}.container[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{width:100%;border:1px solid #cdcdcd;height:16px;margin-top:-22px;background-color:#fff;position:relative;z-index:2}"]}),t})();var hn=m(709);let pn=(()=>{class t{constructor(){this.operations=[],this.loadOperation$=new hn.xQ}startLoading(e){let i=this.operations.find(r=>r.id===e);i||(i=new gn(e,!0),this.operations.push(i),this.loadOperation$.next(i))}stopLoading(e){const i=this.operations.findIndex(r=>r.id===e);if(-1!==i){const r=this.operations[i];r.loading=!1,this.loadOperation$.next(r),this.operations.splice(i,1)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class gn{constructor(n,e){this.id=n,this.loading=e}}const te=function(t){return{hidden:t}};let mn=(()=>{class t{constructor(e,i){this.animationService=e,this.loadingService=i,this.playing=!1,this.loading=!1}ngOnInit(){this.loadingService.loadOperation$.subscribe(e=>{(e.id===a.AVAILABILITY_ALL_LAYERS||e.id===a.OCCUPANCY_ALL_LAYERS)&&(this.loading=e.loading)})}onPlay(){this.playing=!this.playing,this.playing?this.animationService.startAnimation():this.animationService.stopAnimation()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Ge),o.Y36(pn))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-play-button"]],decls:5,vars:9,consts:[[1,"container",3,"click"],[1,"play-button"],["src","assets/icons/play.svg",1,"play",3,"ngClass"],["src","assets/icons/pause.svg",1,"pause",3,"ngClass"],["src","assets/icons/rolling.gif",1,"loading",3,"ngClass"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onPlay()}),o.TgZ(1,"div",1),o._UZ(2,"img",2),o._UZ(3,"img",3),o._UZ(4,"img",4),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.Q6J("ngClass",o.VKq(3,te,i.loading||i.playing)),o.xp6(1),o.Q6J("ngClass",o.VKq(5,te,i.loading||!i.playing)),o.xp6(1),o.Q6J("ngClass",o.VKq(7,te,!i.loading)))},directives:[y.mk],styles:[".container[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;justify-content:center;align-items:center;background-color:#2c2727;box-sizing:border-box;cursor:pointer}.container[_ngcontent-%COMP%]:hover{background-color:#4042ce}.container[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]{box-sizing:border-box;width:60px;height:60px;padding:0;margin:0;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;box-sizing:border-box}.container[_ngcontent-%COMP%]   img.play[_ngcontent-%COMP%]{padding:5px}.container[_ngcontent-%COMP%]   img.pause[_ngcontent-%COMP%]{padding:10px}.container[_ngcontent-%COMP%]   img.loading[_ngcontent-%COMP%]{background-color:#2c2727}"]}),t})();const fn=["input"];let _n=(()=>{class t{constructor(){this.speed=3,this.step=a.PLAY_SPEED_BUTTON_STEP,this.speedChanged=new o.vpe}ngOnInit(){}increaseSpeed(){1===this.speed?this.speed=3:this.speed+=this.step,this.speed>99&&(this.speed=99),this.inputRef.nativeElement.value=this.speed.toString(),this.speedChanged.next(this.speed)}decreaseSpeed(){this.speed-=this.step,this.speed<1&&(this.speed=1),this.inputRef.nativeElement.value=this.speed.toString(),this.speedChanged.next(this.speed)}onSubmit(e){e.stopPropagation(),this.setSpeed()}setSpeed(){const e=parseFloat(this.inputRef.nativeElement.value);e&&e>=1&&e<=99?(this.speed=e,this.speedChanged.next(this.speed)):this.inputRef.nativeElement.value=this.speed.toString()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-play-speed"]],viewQuery:function(e,i){if(1&e&&o.Gf(fn,5),2&e){let r;o.iGM(r=o.CRH())&&(i.inputRef=r.first)}},outputs:{speedChanged:"speedChanged"},decls:10,vars:1,consts:[[1,"container"],[1,"button","minus",3,"click"],["src","assets/icons/remove.svg"],[1,"text"],["type","text",3,"value","blur","keyup.enter"],["input",""],[1,"caption",3,"click"],[1,"button","plus",3,"click"],["src","assets/icons/add.svg"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.NdJ("click",function(){return i.decreaseSpeed()}),o._UZ(2,"img",2),o.qZA(),o.TgZ(3,"div",3),o.TgZ(4,"input",4,5),o.NdJ("blur",function(){return i.setSpeed()})("keyup.enter",function(l){return i.onSubmit(l)}),o.qZA(),o.TgZ(6,"div",6),o.NdJ("click",function(){return o.CHM(r),o.MAs(5).focus()}),o._uU(7,"sec"),o.qZA(),o.qZA(),o.TgZ(8,"div",7),o.NdJ("click",function(){return i.increaseSpeed()}),o._UZ(9,"img",8),o.qZA(),o.qZA()}2&e&&(o.xp6(4),o.Q6J("value",i.speed))},styles:[".container[_ngcontent-%COMP%]{width:120px;position:relative;height:60px;display:flex;z-index:2;flex-direction:row;border-right:1px solid #cdcdcd;justify-content:center;align-items:center;box-sizing:border-box;margin:0;padding:0;background-color:#fff}.container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:46px;height:16px;display:flex;justify-content:center;align-items:center;cursor:pointer;padding:4px}.container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:36px;height:16px;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;margin:0 4px}.container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:26px;height:16px;text-align:center;border:none;padding:0;margin:0;font-size:medium}.container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-top:-4px;margin-left:4px;font-size:medium}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}"]}),t})(),vn=(()=>{class t{constructor(){this.currentTime=new Date,this.speedChanged=new o.vpe,this.markerPosition=0,this.markerClick=new o.vpe}ngOnInit(){this.interval=setInterval(()=>{this.currentTime=new Date},1e4)}ngOnDestroy(){this.interval&&clearInterval(this.interval)}onSpeedChanged(e){this.speedChanged.next(e)}onMarkerPositionChanged(e){this.markerClick.emit(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-player"]],inputs:{markerPosition:"markerPosition"},outputs:{speedChanged:"speedChanged",markerClick:"markerClick"},decls:13,vars:8,consts:[[1,"container"],[1,"current-time"],[1,"time-line"],[1,"current-tab"],[1,"play"],[3,"speedChanged"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o._uU(2),o.ALo(3,"date"),o.TgZ(4,"span"),o._uU(5),o.ALo(6,"date"),o.qZA(),o.qZA(),o.TgZ(7,"div",2),o.TgZ(8,"div",3),o._UZ(9,"app-time-line"),o.qZA(),o.TgZ(10,"div",4),o._UZ(11,"app-play-button"),o.TgZ(12,"app-play-speed",5),o.NdJ("speedChanged",function(s){return i.onSpeedChanged(s)}),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.hij(" ",o.xi3(3,2,i.currentTime,"hh:mm")+" "," "),o.xp6(3),o.hij(" ",o.xi3(6,5,i.currentTime,"EEEE")," "))},directives:[un,mn,_n],pipes:[y.uU],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100px;min-width:300px;max-width:1912px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start}.container[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]{width:150px;height:40px;background-color:#0006;color:#fff;font-weight:bold;font-family:Arial,Helvetica,sans-serif;padding:10px;font-size:large;text-align:center}.container[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:normal}.container[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]{width:100%;min-width:300px;height:60px;position:relative}.container[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{position:absolute;width:230px;height:30px;display:flex;flex-direction:row;top:-40px}@media (max-width: 767){.container[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{left:0px}}@media (min-width: 768px){.container[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{right:0px}}.container[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{width:70px;height:40px;background-color:#6e6d6d;color:#fff;text-align:center;line-height:30px;font-family:sans-serif;font-size:15px;cursor:pointer;padding:5px;box-sizing:border-box}.container[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .long-forecast[_ngcontent-%COMP%]{width:170px}.container[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .observations[_ngcontent-%COMP%]{width:160px}.container[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#1e4bc7;background-color:#fff;font-weight:bold}.container[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]   .current-tab[_ngcontent-%COMP%]{width:calc(100% - 176px);margin-left:176px;height:60px;padding:5px;background-color:#fff;box-sizing:border-box}.container[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]{width:90px;height:60px;position:absolute;left:0px;bottom:0px;display:flex;flex-direction:row}.container[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]   app-play-speed[_ngcontent-%COMP%]{border-right:1px solid #d4d4d4}"]}),t})();const Cn=[{path:"",component:(()=>{class t{constructor(e,i,r,s,l,c,g,b,v){this.locationService=e,this.heatmapService=i,this.availabilityService=r,this.occupancyService=s,this.keyOptionsService=l,this.animationService=c,this.moveService=g,this.zoomService=b,this.timelineService=v,this.initLat=51.4532988403089,this.initLng=-.15141399330019756,this.availabilityOption=!1,this.occupancyOption=!1,this.towerOption=!1,this.coverageOption=!1,this.index=0,this.timelineMarkerPosition=0,this.initZoom=11,this.timelineMarkerDragging=!1,this.timelineClientWidth=0}ngOnInit(){this.keyOptionsService.availabilityChanged$.subscribe(e=>{this.availabilityOption=e,this.availabilityOption?this.availabilityService.showAvailability(this.index):this.availabilityService.clearAvailability()}),this.keyOptionsService.occupancyChanged$.subscribe(e=>{this.occupancyOption=e,this.occupancyOption?this.occupancyService.showOccupancy(this.index):this.occupancyService.clearOccupancy()}),this.animationService.indexChanged$.subscribe(e=>{this.index=e,this.animationService.isRunning()&&(this.availabilityOption&&(this.availabilityService.clearAvailability(),this.availabilityService.showAvailability(this.index)),this.occupancyOption&&(this.occupancyService.clearOccupancy(),this.occupancyService.showOccupancy(this.index)))}),this.animationService.animationStarted$.subscribe(e=>{e?this.startTimeLineAnimation():this.stopTimeLineAnimation()}),this.keyOptionsService.towerChanged$.subscribe(e=>{this.towerOption=e,this.towerOption?this.locationService.showTowers():this.locationService.clearLocations()}),this.keyOptionsService.coverageChanged$.subscribe(e=>{this.coverageOption=e,console.log("chck ...",e),this.coverageOption?this.locationService.showCoverage():this.locationService.hideCoverage()})}backgroundLoading(){this.locationService.isLocationInitialized()||this.locationService.initLocations(),this.locationService.isCoverageInitialized()||this.locationService.initCoverage(),this.availabilityService.loadNext(-1),this.occupancyService.loadNext(-1)}stopTimeLineAnimation(){this.timelineAnimationInterval&&clearInterval(this.timelineAnimationInterval)}startTimeLineAnimation(){this.stopTimeLineAnimation(),this.timelineAnimationInterval=setInterval(()=>{this.timelineService.markerPositionChanged$.next(++this.timelineMarkerPosition),this.timelineMarkerPosition>a.TIMELINE_ANIMATION_MAX_MARKER_POSITION&&this.stopTimeLineAnimation()},a.TIMELINE_ANIMATION_INTERVAL_MILLISECONDS)}ngAfterViewInit(){this.map=this.mapComponent.getMap(),this.onMapReady()}onUp(e){e?this.moveService.keepMovingUp():this.moveService.stopMoving()}onDown(e){e?this.moveService.keepMovingDown():this.moveService.stopMoving()}onRight(e){e?this.moveService.keepMovingRight():this.moveService.stopMoving()}onLeft(e){e?this.moveService.keepMovingLeft():this.moveService.stopMoving()}onZoomIn(){this.zoomService.zoomIn()}onZoomOut(){this.zoomService.zoomOut()}zoomMap(e){const i=this.map.getZoom()+e;i>=0&&i<23&&this.map.setZoom(i)}onTimelineMarkerDrag(e){e.preventDefault(),e.stopPropagation(),this.setTimelineMarkerPosition(e.clientX)}setTimelineMarkerPosition(e){let i=e-(window.innerWidth-e);i>this.timelineClientWidth-30&&(i=this.timelineClientWidth-30),i<0&&(i=0),this.timelineMarkerPosition=i}onMarkerClick(e){console.log("clk ",e),this.setTimelineMarkerPosition(e.clientX)}onMarkerDrag(e){this.timelineMarkerDragging=e.drag,this.timelineClientWidth=e.clientWidth}onSpeedChanged(e){this.animationService.setSpeed(e)}onZoomChanged(){if(this.map.getZoom()<5)return this.locationService.clearLocations(),this.availabilityService.clearAvailability(),void this.occupancyService.clearOccupancy();this.availabilityOption&&this.availabilityService.showAvailability(this.index),this.occupancyOption&&this.occupancyService.showOccupancy(this.index)}onMapReady(){!this.map||(this.moveService.setMap(this.map),this.moveService.setLat(this.initLat),this.moveService.setLng(this.initLng),this.zoomService.setMap(this.map),this.locationService.setMap(this.map),this.heatmapService.setMap(this.map),this.heatmapService.setZoom(this.map.getZoom()),this.locationService.isLocationInitialized()||this.locationService.initLocations(),this.locationService.isCoverageInitialized()||this.locationService.initCoverage(),this.locationService.loadLocations(this.map.getZoom(),this.map.getBounds()),this.map.addListener("zoom_changed",()=>{const e=this.map.getZoom();this.heatmapService.setZoom(e),this.onZoomChanged()}),this.map.addListener("bounds_changed",()=>{const e=this.map.getBounds();this.heatmapService.setBounds(e)}),this.map.addListener("idle",()=>{console.log("zoom: ",this.map.getZoom()),clearTimeout(this.waitForIdle),this.waitForIdle=setTimeout(()=>{this.towerOption&&this.locationService.isLocationInitialized()&&this.locationService.loadLocations(this.map.getZoom(),this.map.getBounds()),this.coverageOption&&this.locationService.isCoverageInitialized()&&this.locationService.showCoverage();const e=this.map.getCenter();this.moveService.setLat(e.lat()),this.moveService.setLng(e.lng())},300)}),this.backgroundLoading())}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Yt),o.Y36(Q),o.Y36(X),o.Y36(Le),o.Y36(P),o.Y36(Ge),o.Y36($t),o.Y36(Jt),o.Y36(Kt))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-monitoring"]],viewQuery:function(e,i){if(1&e&&o.Gf(Ne,5),2&e){let r;o.iGM(r=o.CRH())&&(i.mapComponent=r.first)}},decls:4,vars:4,consts:[[3,"lat","lng","zoom"],[3,"zoomIn","zoomOut","up","down","right","left"],[3,"markerPosition","speedChanged"]],template:function(e,i){1&e&&(o._UZ(0,"app-key-options"),o._UZ(1,"app-map",0),o.TgZ(2,"app-zoom",1),o.NdJ("zoomIn",function(){return i.onZoomIn()})("zoomOut",function(){return i.onZoomOut()})("up",function(s){return i.onUp(s)})("down",function(s){return i.onDown(s)})("right",function(s){return i.onRight(s)})("left",function(s){return i.onLeft(s)}),o.qZA(),o.TgZ(3,"app-player",2),o.NdJ("speedChanged",function(s){return i.onSpeedChanged(s)}),o.qZA()),2&e&&(o.xp6(1),o.Q6J("lat",i.initLat)("lng",i.initLng)("zoom",i.initZoom),o.xp6(2),o.Q6J("markerPosition",i.timelineMarkerPosition))},directives:[sn,Ne,an,vn],styles:["app-key-options[_ngcontent-%COMP%]{position:absolute;left:15px;top:20px;z-index:100}app-settings[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;z-index:100}app-zoom[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:15px;z-index:99;visibility:hidden}@media (min-width: 768px){app-zoom[_ngcontent-%COMP%]{visibility:visible}}app-player[_ngcontent-%COMP%]{position:absolute;bottom:30px;right:10px;z-index:100;min-width:300px;width:80%;max-width:768px}.loading[_ngcontent-%COMP%]{width:56px;height:56px;position:absolute;background-color:transparent;top:20px;right:30px}"]}),t})()}];let yn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[Ie.Bz.forChild(Cn)],Ie.Bz]}),t})();m(402),m(574),m(796),m(555);let Ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({}),t})(),Bt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[Ot]]}),t})(),_i=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[Bt]}),t})(),vi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[y.ez,yn,_i]]}),t})()}}]);